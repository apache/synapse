<synapse xmlns="http://ws.apache.org/ns/synapse">

  <definitions>

    <sequence name="commodityQuote">
    	<!-- set the To address to the real endpoint -->
    	<header name="To" value="http://127.0.0.1:10001/axis2/services/Services"/>
    	<header name="Action" value="urn:commodity"/>

    </sequence>

  </definitions>

  <rules>

  	<!-- Check if the URL matches the stockquote gateway/dumb case -->
  	<filter source="get-property('To')" regex=".*/CommodityQuote.*">
  		<sequence ref="commodityQuote"/>
  	</filter>

  	<send/>
  </rules>

</synapse>