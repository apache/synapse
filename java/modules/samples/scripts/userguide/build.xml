<project name="samples" default="help" basedir=".">
 <target name="help">
  <echo>
  This script requires Ant 1.5 or higher

  usage:
    ant -help 
  		display ant help screen
    ant help 
  		display this message
    ant clean 
  		delete the built directory

    ant compile 
  		build the samples

  	These samples make stockquote requests to ws.invesbot.com mediated through Synapse

  	ant stockquote
  		Use the smart client - Synapse in WS-Addressing router mode
    
  	  examples:
  	  ant stockquote
  	  ant stockquote [-Dsymbol=IBM] [-Durl=http://ws.invesbot.com/stockquotes.asmx]
  	  	[-Dsynapseurl=http://localhost:8080] [-Drepository=client_repo]
  	
  	ant proxystockquote
	    Use the http proxy client - Synapse in "transparent mode" using HTTP proxy
    
  	 	examples:
  	  ant proxystockquote
  	  ant proxystockquote [-Dsymbol=IBM] [-Durl=http://ws.invesbot.com/stockquotes.asmx]
  	  	[-Dsynapseurl=http://localhost:8080]

    ant dumbstockquote 
      Use the dumb soap client - Synapse in "gateway" mode, and transport set to virtual
      url interpreted by Synapse
  
  		examples:
	  	ant dumbstockquote 
	    ant dumbstockquote [-Dsymbol=IBM] [-Dgatewayurl=http://localhost:8080/StockQuote]

    ant customquote 
      Use custom stock quote request and transform (XSLT) between schemas
  
  		examples:
	  	ant customquote 
	    ant customquote [-Dsymbol=IBM] [-Durl=http://ws.invesbot.com/stockquotes.asmx] 
	    	[-Dsynapseurl=http://localhost:8080]

    ant advancedquote 
      Use validating custom quote requests, and also validate against XSD
  
  		examples:
	  	ant advancedquote 
	    ant advancedquote [-Durl=http://ws.invesbot.com/stockquotes.asmx] 
	    	[-Dsynapseurl=http://localhost:8080]

    ant simplequote 
      Use a simple quote using WS-A addressing to demonstrate the Custom server (programmatic configuration creation)
  
  		examples:
	  	ant simplequote 
	    ant simplequote [-Dsymbol=IBM] 
	    	[-Durl=http://ws.invesbot.com/stockquotes.asmx] 
	    	[-Dsynapseurl=http://localhost:8080] [-Drepository=client_repo]

  	ant proxyquote
	    Use Proxy services to query stock prices. (Must be used with the sample configuration # 3)
    
  	 	examples:
  	  ant proxyquote
  	  ant proxyquote -Dsymbol=IBM 
  	  	-DfwdProxy=http://localhost:8080/axis2/services/InvesbotForwardProxy 
  	  	-DdefProxy=http://localhost:8080/axis2/services/InvesbotDefaultProxy 
  	  	-DseqProxy=http://localhost:8080/axis2/services/InvesbotSequenceProxy"
        </echo>
    </target>

		<property name="symbol" value="IBM"/>
    <property name="url" value="http://ws.invesbot.com/stockquotes.asmx"/>
    <property name="synapseurl" value="http://localhost:8080"/>
    <property name="gatewayurl" value="http://localhost:8080/StockQuote"/>
    <property name="repository" value="client_repo"/>
    <property name="fwdProxy" value="http://localhost:8080/axis2/services/InvesbotForwardProxy"/>
    <property name="defProxy" value="http://localhost:8080/axis2/services/InvesbotDefaultProxy"/>
    <property name="seqProxy" value="http://localhost:8080/axis2/services/InvesbotSequenceProxy"/>

    <property name="class.dir" value="target/classes"/>

    <path id="axis.classpath">
        <fileset dir="../lib">
            <include name="*.jar"/>
        </fileset>
    </path>

    <target name="clean">
        <delete dir="target" quiet="true"/>
        <delete dir="${class.dir}" quiet="true"/>
    </target>

    <target name="stockquote" depends="compile">    		
        <java classname="samples.userguide.StockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
            <arg value="${repository}"/>
        </java>
    </target>

    <target name="proxystockquote" depends="compile">    		
        <java classname="samples.userguide.ProxyStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
        </java>
    </target>

    <target name="dumbstockquote" depends="compile">        
        <java classname="samples.userguide.DumbStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${gatewayurl}"/>
        </java>
    </target>

    <target name="customquote" depends="compile">        
        <java classname="samples.mediation.CustomStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
        </java>
    </target>

    <target name="advancedquote" depends="compile">
        <java classname="samples.mediation.AdvancedQuoteClient"
              classpathref="javac.classpath" fork="true">
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
        </java>
    </target>

    <target name="simplequote" depends="compile">        
        <java classname="samples.config.SimpleStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
            <arg value="${repository}"/>
        </java>
    </target>
    
    <target name="proxyquote" depends="compile">        
        <java classname="samples.mediation.ProxyStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${fwdProxy}"/>
            <arg value="${defProxy}"/>
            <arg value="${seqProxy}"/>
        </java>
    </target>

    <target name="init">
        <mkdir dir="${class.dir}"/>
        <path id="javac.classpath">
            <pathelement path="${class.dir}"/>
            <fileset dir="../lib">
                <include name="**/*.jar"/>
            </fileset>
        </path>
    </target>

    <target name="compile" depends="init" description="Compile all Java">
        <javac srcdir="src" destdir="${class.dir}">
            <classpath refid="javac.classpath"/>
        </javac>
    </target>

</project>
