<!--
  ~  Licensed to the Apache Software Foundation (ASF) under one
  ~  or more contributor license agreements.  See the NOTICE file
  ~  distributed with this work for additional information
  ~  regarding copyright ownership.  The ASF licenses this file
  ~  to you under the Apache License, Version 2.0 (the
  ~  "License"); you may not use this file except in compliance
  ~  with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing,
  ~  software distributed under the License is distributed on an
  ~   * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~  KIND, either express or implied.  See the License for the
  ~  specific language governing permissions and limitations
  ~  under the License.
  -->

<project name="samples" default="help" basedir=".">
 <target name="help">
  <echo>
  This script requires Ant 1.5 or higher

  usage:
    ant -help 
  		display ant help screen
    ant help 
  		display this message
    ant clean 
  		delete the build directory
    ant compile 
  		build the samples

  	These samples make stockquote requests to the sample services through Synapse

  	ant stockquote
  		Use the smart client - Synapse in WS-Addressing router mode
  		Use default sample configuration (i.e. start with -sample 0)
    
  	  examples:
  	  ant stockquote
  	  ant stockquote [-Dsymbol=IBM] 
  	  	[-Durl=http://localhost:9000/axis2/services/SimpleStockQuoteService]
  	  	[-Dsynapseurl=http://localhost:8080] [-Drepository=client_repo]
        [-Dsecpolicy=..\..\repository\conf\sample\resources\policy\policy_1.xml]

      ant proxystockquote
	    Use the http proxy client - Synapse in "transparent mode" as an HTTP proxy
	    Use default sample configuration (i.e. start with -sample 0)
    
  	 	examples:
  	  ant proxystockquote
  	  ant proxystockquote [-Dsymbol=IBM] 
  	  	[-Durl=http://localhost:9000/axis2/services/SimpleStockQuoteService]
  	  	[-Dsynapseurl=http://localhost:8080]

    ant dumbstockquote 
      Use the dumb soap client - Synapse in "gateway" mode; transport set to virtual
      url which is interpreted by Synapse
      Use default sample configuration (i.e. start with -sample 0)
  
  	  examples:
	  	ant dumbstockquote 
	    ant dumbstockquote [-Dsymbol=IBM] [-Dgatewayurl=http://localhost:8080/StockQuote]
        [-Dsecpolicy=..\..\repository\conf\sample\resources\policy\policy_1.xml]

    ant customquote 
      Use a custom stock quote request and response format, and transform (XSLT) between
      Use sample configuration #1 (i.e. start with -sample 1)
  
  		examples:
	  	ant customquote 
	    ant customquote [-Dsymbol=IBM] 
	    	[-Durl=http://localhost:9000/axis2/services/SimpleStockQuoteService]
	    	[-Dsynapseurl=http://localhost:8080]
        </echo>
    </target>

    <property name="symbol" value="IBM"/>
    <property name="url" value="http://localhost:9000/axis2/services/SimpleStockQuoteService"/>
    <property name="synapseurl" value="http://localhost:8080"/>
    <property name="gatewayurl" value="http://localhost:8080/StockQuote"/>
    <property name="repository" value="client_repo"/>
    <property name="secpolicy" value=""/>

    <property name="class.dir" value="target/classes"/>

    <path id="axis.classpath">
        <fileset dir="../../lib">
            <include name="*.jar"/>
        </fileset>
    </path>

    <target name="clean">
        <delete dir="target" quiet="true"/>
        <delete dir="${class.dir}" quiet="true"/>
    </target>

    <target name="stockquote" depends="compile">    		
        <java classname="samples.userguide.StockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
            <arg value="${repository}"/>
            <arg value="${secpolicy}"/>
        </java>
    </target>

    <target name="proxystockquote" depends="compile">    		
        <java classname="samples.userguide.ProxyStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
        </java>
    </target>

    <target name="dumbstockquote" depends="compile">        
        <java classname="samples.userguide.DumbStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${gatewayurl}"/>
            <arg value="${repository}"/>
            <arg value="${secpolicy}"/>
        </java>
    </target>

    <target name="customquote" depends="compile">        
        <java classname="samples.userguide.CustomStockQuoteClient"
              classpathref="javac.classpath" fork="true">
           	<arg value="${symbol}"/>
            <arg value="${url}"/>
            <arg value="${synapseurl}"/>
        </java>
    </target>

    <target name="init">
        <mkdir dir="${class.dir}"/>
        <path id="javac.classpath">
            <pathelement path="${class.dir}"/>
            <fileset dir="../../lib">
                <include name="**/*.jar"/>
            </fileset>
        </path>
    </target>

    <target name="compile" depends="init" description="Compile all Java">
        <javac srcdir="src" destdir="${class.dir}">
            <classpath refid="javac.classpath"/>
        </javac>
    </target>

</project>
