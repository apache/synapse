<definitions xmlns="http://ws.apache.org/ns/synapse">

    <!-- Introduction to the script mediator -->

    

        <!-- define a static property for the JavaScript source code file -->
        <localEntry key="stockquoteScript" src="file:repository/conf/sample/resources/script/stockquoteTransform.js"/>

        <!-- define a reuseable endpoint definition and use it within config -->
        <endpoint name="stockquote">
		<address uri="http://localhost:9000/axis2/services/SimpleStockQuoteService"/>
	</endpoint>
    

        <in>
            <!-- transform the custom quote request into a standard quote request expected by the service -->
            <script language="js" key="stockquoteScript" function="transformRequest"/>

            <!-- send message to real endpoint referenced by name "stockquote" and stop -->
            <send>
                <endpoint key="stockquote"/>
            </send>
        </in>

        <out>
            <!-- transform the standard response back into the custom format the client expects -->
            <script language="js" key="stockquoteScript" function="transformResponse"/>

            <!-- now send the custom response back to the client and stop -->
            <send/>
        </out>
    

</definitions> 
